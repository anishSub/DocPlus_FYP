{% extends "base/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/appointment/appointment_personal_info.css' %}">
{% endblock %}

{% block content %}
<div class="appointment-container">
    <div class="main-wrapper">
        
        <div class="header-content">
            <a href="javascript:history.back()" class="back-btn">
                <i class="fas fa-arrow-left"></i>
                Back
            </a>
            <h1>Book Online Video Consultation</h1>
            <p>Complete the form to schedule your 5-minute video appointment</p>
        </div>

        <div class="stepper-card">
            <div class="stepper-container">
                
                <div class="step active">
                    <div class="step-circle">1</div>
                    <div class="step-label">Personal Info</div>
                </div>
                <div class="stepper-line"></div>
                <div class="step">
                    <div class="step-circle">2</div>
                    <div class="step-label">Appointment</div>
                </div>
                <div class="stepper-line"></div>
                <div class="step">
                    <div class="step-circle">3</div>
                    <div class="step-label">Medical Info</div>
                </div>
                <div class="stepper-line"></div>
                <div class="step">
                    <div class="step-circle">4</div>
                    <div class="step-label">Payment</div>
                </div>
            </div>
        </div>

        <div class="form-card">
            <div class="form-header">
                <h2>Personal Information</h2>
                <p>Please provide your personal details</p>
            </div>

            <!-- CRITICAL: ID must be 'appointmentForm' for JS to work -->
            <form id="appointmentForm" method="POST" action="">
                {% csrf_token %}

                <div class="form-section" id="step1-section">
                    <div class="form-grid">
                        
                        <div class="form-group">
                            <label class="label">Full Name <span class="required">*</span></label>
                            <div class="input-wrapper">
                                <input type="text" name="full_name" placeholder="Enter your full name" required>
                                <i class="fas fa-user field-icon"></i>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="label">Email Address <span class="required">*</span></label>
                            <div class="input-wrapper">
                                <input type="email" name="email" placeholder="your.email@example.com" required>
                                <i class="fas fa-envelope field-icon"></i>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="label">Phone Number <span class="required">*</span></label>
                            <div class="input-wrapper">
                                <input type="tel" name="phone" placeholder="+977 98XXXXXXXX" required>
                                <i class="fas fa-phone field-icon"></i>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="label">Date of Birth <span class="required">*</span></label>
                            <div class="input-wrapper">
                                <input type="text" name="dob" placeholder="Select date" onfocus="(this.type='date')" onblur="(this.type='text')" required>
                                <i class="far fa-calendar field-icon"></i>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="label">Gender <span class="required">*</span></label>
                            <div class="input-wrapper">
                                <select name="gender" required>
                                    <option value="" disabled selected>Select Gender</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                </select>
                                <i class="fas fa-chevron-down select-arrow"></i>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="label">City <span class="required">*</span></label>
                            <div class="input-wrapper">
                                <input type="text" name="city" value="Kathmandu">
                                <i class="fas fa-map-marker-alt field-icon"></i>
                            </div>
                        </div>

                        <div class="form-group full-width">
                            <label class="label">Address <span class="required">*</span></label>
                            <div class="input-wrapper">
                                <textarea name="address" placeholder="Enter your complete address" required></textarea>
                                <i class="fas fa-map-marker-alt field-icon"></i>
                            </div>
                        </div>

                    </div> 
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="window.location.href='{% url 'home' %}'">
                            <i class="fas fa-arrow-left"></i>
                            Previous
                        </button>
                        <!-- CRITICAL: data-next-url connects to the JS redirect logic -->
                        <button type="submit" class="btn btn-primary next-btn">
                            Next <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/appointment.js' %}"></script>
{% endblock %}